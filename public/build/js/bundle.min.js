function iniciarApp(){document.querySelector("#selectPeriodo")&&cargarResultados(),document.querySelector("#departamento")&&cargarDepartamentos()}async function cargarResultados(){const e=document.getElementById("selectPeriodo"),t=document.getElementById("selectDepartamento");async function n(){const n=e.value,a=t.value;if(n&&a)try{const e=`/resultados/api?periodos_id=${encodeURIComponent(n)}&departamentos_id=${encodeURIComponent(a)}`,t=await fetch(e);!function(e){const t=document.querySelector(".table__tbody");t.innerHTML="";const n=Array.from(document.querySelectorAll("#preguntas-container span")).map(e=>e.dataset.pregunta),a=e.resultadosFiltrados,o=e.resultadoPrevio;function i(e){return e>=85?"calificacion-verde":e>=80?"calificacion-amarillo":"calificacion-rojo"}n.forEach((e,n)=>{const s=document.createElement("tr");s.classList.add("table__tr");const c=document.createElement("td");c.classList.add("table__td-pregunta"),c.textContent=e,s.appendChild(c);const r=document.createElement("td");r.classList.add("table__td");const A=a[0]&&a[0]["cp"+(n+1)];r.textContent=A?A+"%":"N/A",r.classList.add(i(A)),s.appendChild(r);const l=document.createElement("td");if(l.classList.add("table__td"),A&&o&&o["cp"+(n+1)]){const e=A-o["cp"+(n+1)];let t,a;e>0?(t=`+ ${e.toFixed(2)}%`,a="calificacion-verde"):e<0?(t=e.toFixed(2)+"%",a="calificacion-rojo"):(t="0%",a=i(A)),l.textContent=t,l.classList.add(a)}else l.textContent="N/A";s.appendChild(l);const d=document.createElement("td");d.classList.add("table__td");const u=o&&o["cp"+(n+1)];u?(d.textContent=u+"%",d.classList.add(i(u))):d.textContent="N/A",s.appendChild(d),t.appendChild(s)})}(await t.json())}catch(e){console.error("Error al cargar los resultados:",e)}}e.addEventListener("change",n),t.addEventListener("change",n)}async function cargarDepartamentos(){try{const e="/encuesta/api",t=await fetch(e),n=(await t.json()).departamentos,a=document.getElementById("propiedad"),o=document.getElementById("departamento");a.addEventListener("change",(function(){const e=a.value;o.innerHTML='<option value="">-- Seleccione --</option>',n.filter(t=>t.propiedades_id==e).forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.nombreDepartamento,o.appendChild(t)})}))}catch(e){console.error("Error al cargar datos:",e)}}
/*! modernizr 3.6.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-webp-setclasses !*/document.addEventListener("DOMContentLoaded",(function(){iniciarApp()})),function(e,t,n){function a(e,t){return typeof e===t}function o(e){var t=d.className,n=A._config.classPrefix||"";if(u&&(t=t.baseVal),A._config.enableJSClass){var a=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(a,"$1"+n+"js$2")}A._config.enableClasses&&(t+=" "+n+e.join(" "+n),u?d.className.baseVal=t:d.className=t)}function i(e,t){if("object"==typeof e)for(var n in e)l(e,n)&&i(n,e[n]);else{var a=(e=e.toLowerCase()).split("."),s=A[a[0]];if(2==a.length&&(s=s[a[1]]),void 0!==s)return A;t="function"==typeof t?t():t,1==a.length?A[a[0]]=t:(!A[a[0]]||A[a[0]]instanceof Boolean||(A[a[0]]=new Boolean(A[a[0]])),A[a[0]][a[1]]=t),o([(t&&0!=t?"":"no-")+a.join("-")]),A._trigger(e,t)}return A}var s=[],c=[],r={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){c.push({name:e,fn:t,options:n})},addAsyncTest:function(e){c.push({name:null,fn:e})}},A=function(){};A.prototype=r,A=new A;var l,d=t.documentElement,u="svg"===d.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;l=a(e,"undefined")||a(e.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),r._l={},r.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),A.hasOwnProperty(e)&&setTimeout((function(){A._trigger(e,A[e])}),0)},r._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},A._q.push((function(){r.addTest=i})),A.addAsyncTest((function(){function e(e,t,n){function a(t){var a=!(!t||"load"!==t.type)&&1==o.width;i(e,"webp"===e&&a?new Boolean(a):a),n&&n(t)}var o=new Image;o.onerror=a,o.onload=a,o.src=t}var t=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],n=t.shift();e(n.name,n.uri,(function(n){if(n&&"load"===n.type)for(var a=0;a<t.length;a++)e(t[a].name,t[a].uri)}))})),function(){var e,t,n,o,i,r;for(var l in c)if(c.hasOwnProperty(l)){if(e=[],(t=c[l]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=a(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)1===(r=e[i].split(".")).length?A[r[0]]=o:(!A[r[0]]||A[r[0]]instanceof Boolean||(A[r[0]]=new Boolean(A[r[0]])),A[r[0]][r[1]]=o),s.push((o?"":"no-")+r.join("-"))}}(),o(s),delete r.addTest,delete r.addAsyncTest;for(var p=0;p<A._q.length;p++)A._q[p]();e.Modernizr=A}(window,document);
//# sourceMappingURL=bundle.js.map
